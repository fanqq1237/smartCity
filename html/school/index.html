<!DOCTYPE html>
<html lang="cn">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>
            校园主页
        </title>
        <link rel="stylesheet" href="../../layui/css/layui.css">
        <link rel="stylesheet" href="../../css/base.css">
        <link rel="stylesheet" href="../../css/schoolCard.css">
        <link rel="stylesheet" href="../../css/swiper.min.css">
        <!-- <link rel="stylesheet" href="../../css/certify.css"> -->
    </head>
    <body style="background-color: #F2F2F2;">
        <div class="layui-fluid">
            <!-- 顶部返回与标题 -->
            <div class="layui-row transitContent">
                <h2 class="transitTitle">
                    <a href="javascript:history.back(-1);" class="back">
                        <i class="layui-icon layui-icon-left">
                        </i>
                        返回
                    </a>
                    校园
                    <a href="javascript:##;" class="right addschool add">
                        添加
                    </a>
                </h2>
            </div>
            <!-- 顶部返回与标题end -->

            <!-- 展示的城市云卡 -->
            <div class="layui-row transitCardBox">
                <div id="certify">
                    <div class="swiper-container">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="transitCard">
                                    <p class="title">
                                       <!--  <img src="../../img/sy_gjc.png"> -->
                                        北京大学</p>
                                    <p class="cardNum">李明   <span>2013  1811  131</span></p>
                                    <p class="cardName"><span>校园卡</span></p>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="transitCard">
                                    <p class="title">
                                     <!-- <img src="../../img/sy_gjc.png"> -->清华大学</p>
                                    <p class="cardNum">天一   <span>2013  1811  132</span></p>
                                    <p class="cardName"><span>校园卡</span></p>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="transitCard">
                                    <p class="title">
                                    <!-- <img src="../../img/sy_gjc.png"> -->洛阳理工</p>
                                    <p class="cardNum">小花   <span>2013  1811  133</span></p>
                                    <p class="cardName"><span>校园卡</span></p>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="transitCard">
                                    <p class="title">
                                    <!-- <img src="../../img/sy_gjc.png"> -->河南广播电视大学</p>
                                    <p class="cardNum">小欧   <span>2013  1811  134</span></p>
                                    <p class="cardName"><span>校园卡</span></p>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="transitCard">
                                    <p class="title">
                                    <!-- <img src="../../img/sy_gjc.png"> -->广西壮族大学</p>
                                    <p class="cardNum">小美   <span>2013  1811  135</span></p>
                                    <p class="cardName"><span>校园卡</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="transitCard">
                    <p class="title"><img src="../../img/sy_gjc.png">广西农信城市云卡</p>
                    <p class="cardNum">2013 1811 132</p>
                    <p class="cardName"><span>城市云卡</span></p>
                </div> -->
            </div>
            <!-- 展示的城市云卡 -->
            <!-- 主要的功能内容盒子 -->
            <div class="layui-row transitContentBox">
                <div class="layui-col-xs6">
                    <a href="javascript:;" id="scan">
                        <div class="layui-row contentOne">
                            <div class="layui-col-xs5">
                                <img src="../../img/sy_gjc.png">
                            </div>
                            <div class="layui-col-xs7">
                                扫一扫
                            </div>
                        </div>
                    </a>
                </div>
                <div class="layui-col-xs6">
                    <a href="javascript:;" id="cardBalance">
                        <div class="layui-row contentOne">
                            <div class="layui-col-xs5">
                                <img src="../../img/sy_gjc.png">
                            </div>
                            <div class="layui-col-xs7">
                                电子钱包
                            </div>
                        </div>
                    </a>
                </div>
                <div class="layui-col-xs6">
                    <a href="javascript:;" id="schoolRecharge">
                        <div class="layui-row contentOne">
                            <div class="layui-col-xs5">
                                <img src="../../img/sy_gjc.png">
                            </div>
                            <div class="layui-col-xs7">
                                充值
                            </div>
                        </div>
                    </a>
                </div>
                <div class="layui-col-xs6">
                    <a href="javascript:;" id="schooltransactionDetails">
                        <div class="layui-row contentOne">
                            <div class="layui-col-xs5">
                                <img src="../../img/sy_gjc.png">
                            </div>
                            <div class="layui-col-xs7">
                                交易明细
                            </div>
                        </div>
                    </a>
                </div>
                <div class="layui-col-xs6">
                    <a href="javascript:;" id="schoolpay">
                        <div class="layui-row contentOne">
                            <div class="layui-col-xs5">
                                <img src="../../img/sy_gjc.png">
                            </div>
                            <div class="layui-col-xs7">
                                校园缴费
                            </div>
                        </div>
                    </a>
                </div>
                <div class="layui-col-xs6">
                    <a href="javascript:;" id="attendanceRecord">
                        <div class="layui-row contentOne">
                            <div class="layui-col-xs5">
                                <img src="../../img/sy_gjc.png">
                            </div>
                            <div class="layui-col-xs7">
                                考勤记录
                            </div>
                        </div>
                    </a>
                </div>
                <div class="layui-col-xs6">
                    <a href="javascript:;" id="accessControl">
                        <div class="layui-row contentOne">
                            <div class="layui-col-xs5">
                                <img src="../../img/sy_gjc.png">
                            </div>
                            <div class="layui-col-xs7">
                                门禁记录
                            </div>
                        </div>
                    </a>
                </div>
                <div class="layui-col-xs6">
                    <a href="javascript:;" id="untying">
                        <div class="layui-row contentOne">
                            <div class="layui-col-xs5">
                                <img src="../../img/sy_gjc.png">
                            </div>
                            <div class="layui-col-xs7">
                                解绑
                            </div>
                        </div>
                    </a>
                </div>
                <div class="layui-col-xs6">
                    <a href="javascript:;" id="cardLoss">
                        <div class="layui-row contentOne">
                            <div class="layui-col-xs5">
                                <img src="../../img/sy_gjc.png">
                            </div>
                            <div class="layui-col-xs7">
                                挂失
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            <!-- 主要的功能盒子 -->
        </div>
        <!-- 隐藏域,存放卡片信息 -->
        <input type="hidden" id="cardMsg" value="">
        <!-- 隐藏域,存放卡片信息 --> 
    </body>
    <script src="../../js/jquery-3.3.1.min.js"></script>
    <script src="../../layui/layui.js"></script>
    <script src="../../js/swiper.min.js"></script>
    <script>
        layui.use(['form', 'layer', 'element', 'laytpl'],
        function() {
            var form = layui.form,
            layer = layui.layer,
            element = layui.element,
            laytpl = layui.laytpl;
            
        
        });
        /*var certifySwiper = new Swiper('#certify .swiper-container', {
            watchSlidesProgress: true,
            slidesPerView: 'auto',
            centeredSlides: true,
            loop: true,
            loopedSlides: 5,
            autoplay: false,
            pagination: {
                el: '.swiper-pagination',
                //clickable :true,
            },
            on: {
                progress: function(progress) {
                    for (i = 0; i < this.slides.length; i++) {
                        var slide = this.slides.eq(i);
                        var slideProgress = this.slides[i].progress;
                        modify = 1;
                        if (Math.abs(slideProgress) > 1) {
                            modify = (Math.abs(slideProgress) - 1) * 0.3 + 1;
                        }
                        translate = slideProgress * modify * 260 + 'px';
                        scale = 1 - Math.abs(slideProgress) / 5;
                        zIndex = 999 - Math.abs(Math.round(10 * slideProgress));
                        slide.transform('translateX(' + translate + ') scale(' + scale + ')');
                        slide.css('zIndex', zIndex);
                        slide.css('opacity', 1);
                        if (Math.abs(slideProgress) > 3) {
                            slide.css('opacity', 0);
                        }
                    }
                },
                setTransition: function(transition) {
                    for (var i = 0; i < this.slides.length; i++) {
                        var slide = this.slides.eq(i)
                        slide.transition(transition);
                    }
                },
                slideChangeTransitionEnd: function(){
                    console.log(this);
                    console.log(this.slides.eq(this.activeIndex).html());
                    var $this = this.slides.eq(this.activeIndex);
                    console.log(this.slides.eq(this.activeIndex).find(".cardNum").text())
                  //alert(this.activeIndex);//切换结束时，告诉我现在是第几个slide
                }
            }

        })*/
        var swiper = new Swiper('#certify .swiper-container', {
            effect: 'coverflow',
            grabCursor: true,
            loop: true,
            centeredSlides: true,
            slidesPerView: 'auto',
            coverflowEffect: {
                rotate: 50,
                stretch: 0,
                depth: 100,
                modifier: 1,
                slideShadows : true,
            },
            on: {
                 transitionEnd: function(){
                    console.log(this.slides.eq(this.activeIndex).html());
                    var $this = this.slides.eq(this.activeIndex);
                    console.log(this.slides.eq(this.activeIndex).find(".cardNum span").text());
                    $("#cardMsg").val($this.find(".cardNum span").text());
                }
            }
        });
         
         // 添加学校
        $(".addschool").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "myTransitCard.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "addschool.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });


        // 扫一扫
        $("#scan").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "myTransitCard.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "scan.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });
        // 电子钱包
        $("#cardBalance").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "cardBalance.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "cardBalance.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });
        // 充值
        $("#schoolRecharge").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "transitRecharge.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "schoolRecharge.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });
        // 交易明细
        $("#schooltransactionDetails").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "transactionDetails.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "schooltransactionDetails.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });
        //校园缴费
        $("#schoolpay").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "serviceRange.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "schoolpay.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });
        // 考勤记录
        $("#attendanceRecord").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "cardBalance.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "attendanceRecord.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });
        // 门禁记录
        $("#accessControl").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "transitRecharge.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "accessControl.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });
        // 解绑
        $("#untying").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "transactionDetails.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "untying.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });
        // 挂失
        $("#cardLoss").on("click",function(){
            var codeId = $("#cardMsg").val().replace(/\s*/g,"");
            //window.location.href = "serviceRange.html?codeId="+codeId;
            localStorage.setItem("codeId",codeId);
            layer.open({
                type: 2,
                closeBtn: 0,
                title: false,
                content: "cardLoss.html?codeId="+codeId,
                area: ['100%', '100%'],
                yes: function(index) {
                    layer.close(index);
                },
                end: function() {
                    form.render();
                }
            });
        });
    </script>

</html>